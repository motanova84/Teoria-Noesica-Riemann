name: ðŸ“¡ Resonancia Viva CI

on:
  schedule:
    - cron: '17 14 * * *'  # Cada dÃ­a a las 14:17 UTC
  workflow_dispatch:

jobs:
  generar-resonancia:
    name: ðŸŽµ Generar grÃ¡fico de resonancia
    runs-on: ubuntu-latest

    steps:
      - name: ðŸ“¥ Checkout del repo
        uses: actions/checkout@v4

      - name: ðŸ“… Obtener fecha actual UTC
        id: date
        run: echo "fecha=$(date -u +%Y%m%d)" >> $GITHUB_OUTPUT

      - name: âœ… Verificar frecuencia
        run: python3 scripts/verifica_frecuencia.py

      - name: ðŸ“Š Generar grÃ¡fico
        run: |
          pip install matplotlib
          mkdir -p resultados_qcal
          python3 scripts/genera_grafico.py

      - name: ðŸ“¤ Subir grÃ¡fico como artefacto
        uses: actions/upload-artifact@v4
        with:
          name: grafico-resonancia-${{ steps.date.outputs.fecha }}
          path: resultados_qcal/grafico_resonancia_*.png

